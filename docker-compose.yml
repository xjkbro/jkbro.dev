version: "3.8"
services:
    reverse-proxy:
        # The official v3 Traefik docker image
        image: traefik:v3.1
        # Enables the web UI and tells Traefik to listen to docker
        command:
            - "--api.insecure=true"
            - "--providers.docker=true"
            - "--providers.docker.exposedbydefault=false"
            - "--entryPoints.web.address=:80"
        ports:
            # The HTTP port
            - "3000:80"
            # The Web UI (enabled by --api.insecure=true)
            - "8080:8080"
        volumes:
            # So that Traefik can listen to the Docker events
            - /var/run/docker.sock:/var/run/docker.sock
    app:
        build: .
        container_name: app
        labels:
            # - "traefik.http.routers.jkbrodev.rule=Host(`jsondelara.com`)"
            - "traefik.enable=true"
            - "traefik.http.routers.app.rule=Host(`jsondelara.com`)"
            - "traefik.http.routers.app.entrypoints=web"
        # ports:
        #     - 3000:3000
        # volumes:
        #     - .:/app
        command: bun dev
